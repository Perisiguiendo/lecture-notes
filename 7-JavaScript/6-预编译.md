##  JS运行三部曲
- 语法分析
- 预编译
- 解释执行

##  预编译前奏
- `imply global` 暗示全局变量：即任何变量，如果变量未经声明的变量直接赋值，此变量就为全局变量，归window对象所有

```javascript
a = 10;
----> window.a = 10;
```

- 一切声明的全局变量，全是window的属性

```javascript
var a = 123;
----> window.a = 123;
```

- `注`

```javascript
function test() {
	var a = b = 123;
}
test();
console.log(window.a); // undefined
console.log(window.b); // 123
// a是局部变量
// 变量b未经声明，是全局变量
```

##  预编译过程
- 预编译过程
  1. 创建 GO（Gobal Object）对象（全局上下文）
  2. 找变量声明，将变量作为 GO 属性名，值为 undefined
  3. 在全局找函数声明，值赋予函数体
  4. 执行函数的前一刻，生成 AO（Activation Object）对象（执行期上下文）
  5. 找形参和变量声明，将变量和形参名作为 AO 属性名，值为 undefined
  6. 将实参值和形参统一
  7. 在函数体里面找函数声明，值赋予函数体

```javascript
global = 100;
function fn() {
	console.log(global);
	global = 200;
	console.log(global);
	var global = 300;
}
fn();
var global;

//-------------------------
//1. 创建GO
//   GO { global: undefined; fn: function () {//..} }
//2. 逐行运行
//   第一句：GO { global: 100; fn: function () {//..} }
//   第二句：跳过
//   第三句：执行函数
//3. 创建AO
//   AO { global: undefined; }
//4. 逐句执行
//   第一句：打印 undefined 注：该函数的执行期上下文中有 global，所以直接打印
//   第二句：AO { global: 200; }
//   第三句：打印 200
//   第四句：AO { global: 300; }
```

- GO 就是 window
- JS 不建议在 if 里边声明函数
- 只有typeof（XXX）不会报错，返回值是字符串类型
- typeof（null）的结果为object